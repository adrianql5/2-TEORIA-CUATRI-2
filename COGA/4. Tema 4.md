# 4.1 View Space
El **View Space** se corresponde con el espacio de visualizaciÃ³n de la cÃ¡mara, resultado de transformar las coordenadas de la escena **World Space** en la de usuario/cÃ¡mara.

Esto se consigue colocÃ¡ndola en un punto en el espacio, determinando hacia donde mira mediante una combinaciÃ³n de traslaciones y rotaciones. Estas transformaciones se almacenan dentro de la **matriz de proyecciÃ³n**, que transforma las coordenadas de la escena en las de la cÃ¡mara.

Gracias a estas transformaciones obtenemos el **Clip Space**. El **Clip Space** es todo el espacio obtenido de la matriz de proyecciÃ³n, donde se sitÃºan los objetos en sus posiciones correspondientes tras realizar la transformaciÃ³n. Sin embargo se debe definir el **frustrum**, que se corresponde a la parte del Clip Space que se ve y en la cual estarÃ¡n aquellos objetos visibles.

Los objetos fuera del **frusturm** se eliminan mediante un proceso llamado **clipping**. Normalmente el **frustrum** se corresponde con el cubo en el cual se pueden ver los objetos, aunque es mÃ¡s bien como una pirÃ¡mide.
![[Pasted image 20250301160144.png]]
Una vez determinado el **frustrum** se mapean las coordenadas 3D a un espacio 2D similar a sacar una foto. Estas coordenadas resultante se asignarÃ¡n en las coordenadas de la pantalla.

# 4.2 ProyecciÃ³n
Una **proyecciÃ³n** es una transformaciÃ³n que representa un espacio de **mayor dimensiÃ³n en otro de menor dimensiÃ³n** (_3D â†’ 2D_). En grÃ¡ficos por computadora, se usa para convertir escenas tridimensionales en imÃ¡genes bidimensionales en la pantalla. Para definir una proyecciÃ³n, se necesitan los siguientes elementos:

- **Objetos de la escena**: Elementos tridimensionales que queremos visualizar.
 
- **Plano de proyecciÃ³n**: Superficie imaginaria donde se proyectan los objetos.
 
- **Centro de proyecciÃ³n**: Punto desde donde se observa la escena (cÃ¡mara).

> [!Nota] 
> El **plano de proyecciÃ³n** es como una hoja de papel donde se "dibuja" la imagen proyectada del objeto 3D.  
> El **punto de fuga** es el lugar donde las lÃ­neas paralelas parecen converger en una proyecciÃ³n en perspectiva, simulando la profundidad.

La proyecciÃ³n se genera al **trazar lÃ­neas rectas (proyectores)** desde el objeto hasta el plano de proyecciÃ³n. Dependiendo de cÃ³mo se organicen estos proyectores, existen dos tipos principales de proyecciÃ³n:

![[Pasted image 20250330163533.png]]

## 4.2.1 ProyecciÃ³n Paralela (OrtogrÃ¡fica)

En este tipo de proyecciÃ³n, el **centro de proyecciÃ³n estÃ¡ en el infinito**, por lo que todos los proyectores son **lÃ­neas paralelas** entre sÃ­. No hay un punto de fuga, lo que significa que los objetos **mantienen su tamaÃ±o y forma independientemente de la distancia**.

**CaracterÃ­sticas**:
- No hay distorsiÃ³n de perspectiva.
- Los objetos mantienen sus proporciones exactas.
- Se usa en planos tÃ©cnicos y CAD (diseÃ±o asistido por computadora).

**Ejemplo en OpenGL**:
```cpp
glOrtho(left, right, bottom, top, near, far);
```
> Define un volumen de visualizaciÃ³n ortogrÃ¡fico donde no hay efecto de profundidad.

![[Pasted image 20250330164013.png]]

## 4.2.2 ProyecciÃ³n Perspectiva
AquÃ­, los proyectores **convergen en un punto de proyecciÃ³n finito**, lo que **simula la profundidad y la distancia**. A medida que los objetos se alejan, parecen mÃ¡s pequeÃ±os, lo que genera una representaciÃ³n mÃ¡s realista.

ðŸ”¹ **CaracterÃ­sticas**:
- Los objetos mÃ¡s lejanos se ven mÃ¡s pequeÃ±os. 
- Se genera un efecto visual mÃ¡s natural.
- Hay **uno o mÃ¡s puntos de fuga**, dependiendo del nÃºmero de direcciones de proyecciÃ³n.

ðŸ”¹ **Ejemplo en OpenGL**:

```cpp
gluPerspective(fov, aspect, near, far);
```
> Crea una proyecciÃ³n en perspectiva con Ã¡ngulo de visiÃ³n (`fov`), relaciÃ³n de aspecto y recorte cercano y lejano.

> ðŸ”¹ **Nota**:  
> Si miramos una carretera recta, las lÃ­neas parecen converger en un punto en el horizonte. **Ese es el punto de fuga.**

![[Pasted image 20250330164030.png]]
## 4.2.3 ClasificaciÃ³n de las Proyecciones
![[Pasted image 20250330164248.png]]

### Proyecciones Paralelas
Dependiendo de cÃ³mo los proyectores intersectan el plano de proyecciÃ³n:

- **OrtogrÃ¡ficas**: Los proyectores son perpendiculares al plano.
- **Oblicuas**: Los proyectores no son perpendiculares.

ðŸ“Œ Dentro de las ortogrÃ¡ficas, existen las **proyecciones multivistas**, que se usan en planos tÃ©cnicos para representar vistas de **frente, perfil y planta**.

ðŸ“Œ Si la direcciÃ³n de proyecciÃ³n no es paralela a ningÃºn eje, se generan **proyecciones axonomÃ©tricas**:

- **IsomÃ©trica**: Ãngulos iguales con los tres ejes.
- **DimÃ©trica**: Dos Ã¡ngulos iguales.
- **TrimÃ©trica**: Tres Ã¡ngulos distintos.

### Proyecciones en Perspectiva
Se pueden clasificar segÃºn la cantidad de **puntos de fuga**:

- **Perspectiva con 1 punto de fuga**: Un conjunto de lÃ­neas convergen en un solo punto (ejemplo: mirar por un pasillo recto).

- **Perspectiva con 2 puntos de fuga**: Dos conjuntos de lÃ­neas convergen en diferentes direcciones (ejemplo: una esquina de un edificio).
 
- **Perspectiva con 3 puntos de fuga**: Tres conjuntos de lÃ­neas convergen, agregando profundidad (ejemplo: un rascacielos visto desde abajo).

En las **proyecciones ortogrÃ¡ficas multivista**, el **plano de proyecciÃ³n** es **paralelo** a los ejes X, Y o Z.

# 4.3 CÃ¡lculo de Matrices
Las matrices de proyecciÃ³n y de vista se pueden calcular a mano. En el caso de la matriz de proyecciÃ³n **ortogrÃ¡fica**:  
**glOrtho(left, right, top, bottom, near, far)**

- **R** = right
- **L** = left
- **T** = top
- **B** = bottom
- **N** = near
- **F** = far

$$\begin{bmatrix} \frac{2}{R - L} & 0 & 0 & -\frac{(R + L)}{R - L} \\ 0 & \frac{2}{T - B} & 0 & -\frac{(T + B)}{T - B} \\ 0 & 0 & \frac{2}{F - N} & -\frac{(F + N)}{F - N} \\ 0 & 0 & 0 & 1 \end{bmatrix}$$


Para la matriz de proyecciÃ³n **perspectiva**: **gluPerspective (fovy, aspect, near, far)**

$$\begin{bmatrix} \frac{1}{\text{Aspect} \cdot \tan(fovy/2)} & 0 & 0 & 0 \\ 0 & \frac{1}{\tan(fovy/2)} & 0 & 0 \\ 0 & 0 & \frac{N+F}{N-F} & \frac{2FN}{N-F} \\ 0 & 0 & -1 & 0 \end{bmatrix}$$

>[!Recordatorio]
> **Coordenada HomogÃ©nea de un punto:** basta con aÃ±adir un 1 al final del vector.
> **Normalizar el punto:** dividimos cada elemento del punto entre el maximo valor de todos.





